{% extends 'base.html' %}

{% block content %}

    <div class="container">
        <a href="{% url 'add_post' %}"><button type="button" class="btn btn-info btn-lg btn-block">Add post</button></a>
        <br><br>

        {% for tweet in tweets %}
        <div class="card">
            <div class="float-right">
                <h6 class="card-header float-right small">{{ tweet.creation_date|timesince }} ago</h6>
            </div>
            <div class="card-body">
                <h7 class="card-title">{{ tweet.content|truncatewords:10 }}</h7><hr>
                <p class="card-text"><i>{{ tweet.user }}</i></p>
                <div class="float-right">
                    <a href="{% url 'post' post_id=tweet.id %}" class="btn btn-info">Show post</a>
                    {% if tweet.comments_set.exists %}
                    <button class="btn btn-warning" onclick="myFunction()">Comments ({{ comments_amount }})</button>
                    {% else %}
                    <button class="btn btn-warning disabled">Comments</button>
                    {% endif %}
                </div>
            </div>
        </div><br>
        {% endfor %}

        <div id="comments" style="display: none">
            {%  for comment in comments %}
                <div class="card bg-light">
                    <div class="card-body">
                        <p style="float: right" class="small">{{ comment.creation_date|timesince }}</p>
                        <p>{{ comment.comment }}</p>
                        <p><i>{{ comment.user }}</i></p>
                    </div>
                </div><br>
            {% endfor %}
        </div>
    </div>

    <script>
    function myFunction() {
        var x = document.getElementById('comments');
        if (x.style.display === 'none') {
            x.style.display = 'block';
        } else {
            x.style.display = 'none';
        }
    }
    </script>
{% endblock %}